# 仓鼠经济助手

?> 本页面内容基于 [HamsterEcoHelper](https://github.com/NyaaCat) 的相关 wiki。

仓鼠经济（HamsterEcoHelper）是为促进服务器经济流动的辅助性插件。

## 🛍天喵商城 :id=market

天喵商城允许玩家 *随时随地* 的浏览、出售、购买商品。

### 卖家操作

* 将物品拿在手上，使用`/heh market offer [单价]`把物品销售到天喵商城。
* 例如手持一组羊毛输入`/heh market offer 1`即可以每个羊毛`1`软妹币的价格上架一组羊毛。
* 每位玩家可以在天喵商城上架`6`个物品槽位。如果要销售大宗物品*（例如几十组原木）*可以把物品先放在潜影盒里，然后再把潜影盒挂到天喵商城。
* 天喵商城的上架费用（即每次`/heh market offer`的费用）为`1`软妹币，销售价格为`原价+2%`的税。税由买家承担。上架后每现实的`24`小时收取`1`软妹币的托管费用，直到物品售出。

![天喵商城 - /heh offer](../assets/images/plugins/heh-offer.jpg ':size=450')

### 买家操作

* `/hm`浏览天喵商城中的物品。左键点击购买一个，<kbd>Shift</kbd> <kbd>左键点击</kbd> 购买一格里的 *全部东西*。

![天喵商城 - /hm](../assets/images/plugins/heh-view.jpg ':size=450')

## 🙋🏻‍征购 :id=requisition

如果你 *需要* 某些材料，使用征购向其他玩家购买是一个不错的途径。发起征购后，服务器在线的玩家都能够看到征购消息。届时每个玩家都可以参与征购，把东西卖给发起征购的玩家。

* 使用`/hreq [物品名称] [单价] [数量]`向全服玩家收购物品。
* 例如以`1`软妹币的单价收购`100`个羊毛则输入`/hreq wool 1 100`。
* `[物品名称]`必须写`物品ID`，例如云杉原木的ID是`spruce_log`。使用 <kbd>F3</kbd> <kbd>H</kbd> 显示 *高级物品信息* 查看物品ID。
* 本插件在聊天栏输出的物品信息，均可以将鼠标悬浮到文字上来预览物品，查看详细属性。

![征购](../assets/images/plugins/heh-req.jpg ':size=450')

## 💰拍卖 :id=auction

当你觉得你手上的东西可能非常抢手时，可以将其拍卖💰出去。说不定可以赚一笔🥳

### 拍卖操作

* 将物品拿在手上，使用`/hauc [起拍价] [加价幅度] [保留价]`拍卖手上的物品。
* 例如以底价`100`软妹币，每次抬价至少`10`软妹币拍卖附魔书，且希望至少拍到`150`软妹币才出售，则将要拍卖的附魔书拿在手上，输入`/hauc 100 10 150`即可。如果不设置保留价格*（即只要有人出价成功即可购得）*，使用`/hauc 100 10`。
* 每次拍卖成功，均会收取成交价格的`2%`作为手续费用，由买方承担。

![拍卖](../assets/images/plugins/heh-auc.jpg ':size=450')

### 买家操作

* 输入`/hbid [你的出价]`参与竞拍。

## ⚖️木牌商店 :id=signshop

![木牌商店](../assets/images/plugins/heh-sign-demo.jpg ':size=450')

* 每个玩家可以创建 *三种* 类型的木牌商店
  * `销售`将物品出售给其他玩家
  * `收购`从其他玩家那里收购物品
  * `乐透`简单的抽奖箱
* 每个玩家 *总共* 可以创建`6`个木牌商店（销售+收购+乐透之和）。
* `销售`和`收购`木牌商店有库存上限，这两者共享 *128个物品槽空间*。`乐透`没有库存上限。
* 同一玩家、同类型木牌商店的内容物是同步的，请善用此特性。
* `乐透`和`收购木牌`的 *存储箱* 不占用上面提到的 *128个物品槽空间*。✏️使用设置命令可以修改存储箱的位置，即箱子可以之后重新设置到不和木牌在同一位置的地方。新的存储箱将立即生效，但之前箱子里的物品不会转移到新的箱子✏️

### 店主操作

#### 创建销售商店

* 创建`销售商店`只需要木牌。
* 放下一个木牌，并写上：
  * 第一行`[shop]`
  * 第二行`SELL`
  * 第三行/第四行可为任意文本，比如你的商店介绍
  * 点击查看例子 ![销售商店](../assets/images/plugins/heh-sign-sell.jpg ':size=24')
* 创建牌子后，手中拿着需要上架出售的物品，准星对准木牌，输入指令`/heh shop sell [单价]`。例如`1`软妹币每个的价格上架一组羊毛，则手持一组羊毛`/heh shop sell 1`。输入完指令后，物品会存到你的`销售商店`里。右键木牌即可查看或取出商品。

#### 创建收购商店

* 创建`收购商店`需要木牌和箱子。
* 放下一个箱子，插上木牌并写上：
  * 第一行`[shop]`
  * 第二行`BUY`
  * 第三行/第四行任意文本，比如你的商店介绍
  * 点击查看例子 ![收购商店](../assets/images/plugins/heh-sign-buy.jpg ':size=24')
* 创建牌子后，使用指令`/heh shop storage set`然后右键点一个箱子设置收购用存储箱。收购的物品将存储在此箱子中。📌箱子不一定要跟木牌在一起，玩家可以把收购用的存储箱设置在别的地方*（例如家里）*📌
* 要添加需要收购的东西，手持物品，准心对准收购木牌，输入`/heh shop buy [单价]`即可。例如手持一个（或多个）羊毛，然后输入`/heh shop buy 2`，则代表以`2软妹币/个`的价格进行收购。

#### 创建乐透商店

* 创建`乐透/抽奖商店`也需要木牌和箱子。
* 放下一个箱子，插上木牌并写上：
  * 第一行`[shop]`
  * 第二行`LOTTO`
  * 第三行`任意文本`
  * 第四行`单次交易价格''
  * 点击查看例子 ![乐透商店](../assets/images/plugins/heh-sign-lotto.jpg ':size=24')
* 创建牌子后，使用指令`/heh shop lotto set`然后右键点一个箱子设置抽奖池。请将物品放在此箱子中，每次交易将从中随机抽取 1 个槽的物品。⚠️如果一个槽里有一组物品，那么会被抽掉一整组而非一组中的一个⚠️

### 顾客操作

#### 购买销售商店的东西

* <kbd>鼠标右键</kbd> `销售木牌`，打开商店界面。
* <kbd>鼠标左键</kbd> 商品购买一个，<kbd>Shift</kbd> <kbd>鼠标左键</kbd> 购买一格里的全部东西。

#### 向收购商店出售东西

* <kbd>鼠标右键</kbd> 查看店家在收购哪些东西。
* 拿相应物品 <kbd>鼠标左键</kbd> `收购木牌` 即可出售，<kbd>Shift</kbd> <kbd>鼠标左键</kbd> 出售当前手持的所有物品。

#### 在乐透商店抽奖

* <kbd>鼠标右键</kbd> `乐透木牌`，参与抽奖。

#### 搜索商品

如希望搜索木牌商店中正在销售的物品，请使用`/heh search [关键字]`进行搜索，例如`/heh search wood`，详见下文[天喵搜索](#search)。

## ✈️天喵直送 :id=delivery

* 以特定总价向特定玩家销售手中的物品。例如向玩家`caohun`以`100`软妹币的总价销售手中的`12`个面包：`/heh sellto caohun 100`。买家将收到相应的账单 *ID* 通知，支付账单后，货物即发送给买家。
* 支付账单使用`/heh pay [invoice ID]`。例如`/heh pay 12345`。注意 *ID* 不是款项，请认真阅读账单包含的物品内容和款项。
* 💡账单 ID 并非私密，也并非只有买家才能支付特定账单💡
* 直送的消费税是`2%`，每位玩家最多可以有`40`份等待支付的卖方账单。
* 其他帮助信息：`/heh transaction help`

## 📢天喵传媒 :id=ads

* 广告每`2分钟`轮播一条。
* 展示价格是`1软妹币/次`（价格依据设定的次数）
* 发布广告展示次数范围是`200`到`2000`次。
* 每条广告的长度不超过`140`个字符，允许使用`&k`之外的[颜色代码](plugins/chatutil.md)。

```formula
广告实际展示次数 = 向下取整 [设定的次数 / (当前在线人数 - AFK人数 - 广告主)]
```

### 发布广告

指令：`/heh ads add [广告文本] [展示次数]`。文本请使用反引号<code>`</code>括起来，比如：

```command
    /heh ads add `&b好喝的水 &6在XX城YY街ZZ号商铺上货啦~欢迎选购` 500
```

之后会展示预览和价格。如果没有问题，请输入`同样的命令`+`confirm`来确认发布，如下：

```command
    /heh ads add `&b好喝的水 &6在XX城YY街ZZ号商铺上货啦~欢迎选购` 500 confirm
```

?> 🔖上面操作的快捷键为依次按下 <kbd>聊天键</kbd> <kbd>⬆</kbd> <kbd>空格</kbd> 然后输入`confirm`，最后按下 <kbd>回车</kbd> 发送出去。

### 其他指令

* `/heh ads list`
  * 查看广告列表。
* `/heh ads revoke [ID]`
  * 撤回广告。
  * 这里的 *ID* 是查看列表时前面的 *ID*。⚠️撤回广告不会退回广告费用⚠️
* `/heh ads mute`
  * 屏蔽所有广告。
  * 基于平等对待原则，屏蔽广告后将不会收到广告，但是也不能发布广告。已经发布的广告也不会展示。
* `/heh ads unmute`
  * 取消屏蔽广告。

## 🔍天喵搜索 :id=search

使用方法：`/heh search 关键词 [选项:值]`。

可用选项：

| 选项       | 等价选项 | 值                                  | 说明                         |
| ---------- | -------- | ----------------------------------- | ---------------------------- |
| `item`     | `i`      | `物品ID`                            | 仅搜索指定物品               |
| `player`   | `p`      | `玩家ID`                            | 仅搜索指定玩家的商品         |
| `range`    | `r`      | `搜索范围`                          | 仅搜索指定半径内有木牌的商店 |
| `advanced` | `a`      | `ench`,`enchonly`,`lore`,`loreonly` | 见下面的 *额外说明*          |

* *额外说明*
  * `ench` → 搜索包括附魔
  * `enchonly` → 仅搜索附魔
  * `lore` → 搜索包括描述
  * `loreonly` → 仅包括描述
  * 以上选项间用`|`并列，例如`/heh search ... a:lore|ench`

只有当物品改过名后*（比如把石头改成了“闪闪发光的石头”）*才能直接在关键字中使用中文。对于没有改过名字的物品（例如“橡木原木”和“石头”），需要直接搜索物品ID，也就是物品的英文名（从1.13开始所有物品ID均采用英文单词）。要快速查看物品的ID，在游戏中使用 <kbd>F3</kbd> <kbd>H</kbd> 开启 *高级信息显示*，然后将鼠标悬浮在物品上即可查看。

第一个关键词可指定为`*`，表示任意值。关键词之间为“或”关系，即仅需包含任意一个关键词。例子：

* `/heh search 木`
  * 搜索名称带有“木”的物品
* `/heh search * r:100`
  * 搜索一百格距离内商店出售的所有物品
* `/heh search * p:miu_bug`
  * 搜索miu_bug的商店出售的所有物品
* `/heh search 木 a:lore`
  * 搜索名称或描述带有“木”的物品
* `/heh search 杀 a:lore|ench`
  * 搜索名称或描述或附魔带有“杀”字的物品
* `/heh search * i:276 a:loreonly`
  * 搜索带有任意描述的钻石剑
* <code>/heh search \`勇气绝杀 I\` I a:loreonly</code>
  * 搜索带有`勇气绝杀 I` 描述的物品
* `/heh search inf a:ench`
  * 搜索带有无限附魔的物品
* `/heh search 亡灵 节肢 a:enchonly`
  * 搜索带有亡灵或节肢杀手附魔的物品

若一页的搜索结果多于9个，可用`/heh searchpage page`翻页。搜索的冷却视启用的高级搜索选项而定。

## 🏦系统余额 :id=system-balance

*系统余额* 是一个特殊的软妹币账户。系统余额的多少反映了游戏内经济的活跃程度。

系统余额的 *收入* 来自：

* 使用上述交易方式*（天喵商城、拍卖等）*所产生的 *税*。
* 使用任何系统服务*（例如，改后缀、改重生点、使用魔法时间&天气等）*。

输入`/heh balance view`查看系统余额。

## 🍰经济活跃奖励 :id=flourish-bonus

系统每天会抽取[系统余额](#system-balance)的`2.5%`作为 *经济活跃奖励* 自动存入到玩家的账户中。
